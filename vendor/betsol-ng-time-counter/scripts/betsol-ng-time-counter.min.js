/**
 * betsol-ng-time-counter - Minimalistic time-counter for Angular.js
 * @version v1.0.0
 * @link https://github.com/betsol/ng-time-counter
 * @license MIT
 *
 * @author Slava Fomin II <s.fomin@betsol.ru>
 */
!function(n){"use strict";function e(){var n=1;i.forEach(function(e){n*=e[1],e[1]=n}),i.reverse()}function t(e){var t={};return e=Math.abs(e),n.forEach(i,function(n){var i,o=n[0],r=n[1];e>0?(i=Math.floor(e/r),e-=i*r):i=0,t[o]=i}),t.milliseconds=e,t}var i=[["seconds",1e3],["minutes",60],["hours",60],["days",24],["months",30],["years",12]];e(),n.module("betsol.timeCounter",[]).directive("bsTimeCounter",function(){return{restrict:"EAC",scope:{date:"=",onFinish:"&",interval:"@"},transclude:!0,link:function(n,e,t,i,o){o(n,function(n){e.append(n)})},controller:["$scope","$interval","$timeout",function(e,i,o){function r(){if(e.date instanceof Date){var n=new Date;c=n.getTime()-e.date.getTime(),s=0>c}else c=0,s=!1;a()}function a(){n.extend(e,t(c))}var c,s,u,f=parseInt(e.interval)||1e3;e.$watch("date",r),u=i(function(){c+=f,s&&c>=0&&(c=0,i.cancel(u),o(function(){e.onFinish()})),a()},f),e.$on("$destroy",function(){i.cancel(u)})}]}})}(angular);